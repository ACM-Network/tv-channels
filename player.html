<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamically Load HLS Channels</title>
    <link href="https://vjs.zencdn.net/7.19.2/video-js.css" rel="stylesheet">
</head>
<body>
    <video id="my-video" class="video-js vjs-big-play-centered vjs-theme-sea" controls preload="auto" fluid="true" poster="https://www.tutorialspoint.com/videos/sample.png" data-setup='{}'>
        <!-- Source tags will be dynamically added here -->
    </video>

    <script src="https://vjs.zencdn.net/7.17.0/video.min.js"></script>
    <script src="https://unpkg.com/videojs-contrib-hls/dist/videojs-contrib-hls.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            var player = videojs('my-video');
            var sources = []; // Array to store dynamically fetched sources

            // Function to fetch HLS channel URLs
            function fetchHLSChannels() {
                // Replace with your logic to fetch HLS channel URLs
                // Example: Fetch from an API endpoint
                fetch('https://api.example.com/channels')
                    .then(response => response.json())
                    .then(data => {
                        // Assuming data is an array of channel objects with HLS URLs
                        data.forEach(channel => {
                            sources.push({ src: channel.hls_url, type: 'application/x-mpegURL' });
                        });

                        // Clear existing sources
                        player.pause();
                        player.src([]);

                        // Add new sources dynamically
                        sources.forEach(function (source) {
                            player.src(source);
                        });

                        // Load the first source initially
                        player.load();
                        player.play(); // Optional: Autoplay the first channel
                    })
                    .catch(error => {
                        console.error('Error fetching HLS channels:', error);
                    });
            }

            // Call function to fetch HLS channels
            fetchHLSChannels();
        });
    </script>
</body>
</html>
